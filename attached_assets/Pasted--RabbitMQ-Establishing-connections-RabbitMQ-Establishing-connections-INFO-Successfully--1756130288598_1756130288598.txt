[RabbitMQ] Establishing connections...
[RabbitMQ] Establishing connections...
[INFO] Successfully loaded pdf2pic module
Warning: Cannot polyfill `DOMMatrix`, rendering may be broken: "Error: libuuid.so.1: cannot open shared object file: No such file or directory".
Warning: Cannot polyfill `Path2D`, rendering may be broken: "Error: libuuid.so.1: cannot open shared object file: No such file or directory".
[INFO] Successfully loaded pdfjs-dist module
[Telemetry] Initializing observability...
[Telemetry] Service: loanserve-pro
[Telemetry] Version: 1.0.0
[Telemetry] Environment: development
[Migration] Starting database migrations...
[Migration] Error running migrations: error: type "collection_status" already exists
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async migrate (/home/runner/workspace/node_modules/src/neon-http/migrator.ts:45:5)
    at async runMigrations (/home/runner/workspace/server/migrations.ts:13:5)
    at async <anonymous> (/home/runner/workspace/server/index.ts:89:3) {
  length: 97,
  severity: 'ERROR',
  code: '42710',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'typecmds.c',
  line: '1167',
  routine: 'DefineEnum'
}
[Consumers] Starting payment processing consumers...
[Consumers] Waiting for RabbitMQ connection...
[RabbitMQ] Applying topology...
[RabbitMQ] Exchange declared: servicing.direct (direct)
[RabbitMQ] Applying topology...
[RabbitMQ] Exchange declared: payments.topic (topic)
[RabbitMQ] Exchange declared: servicing.direct (direct)
[RabbitMQ] Exchange declared: documents.direct (direct)
[RabbitMQ] Exchange declared: payments.topic (topic)
[RabbitMQ] Exchange declared: notifications.topic (topic)
[RabbitMQ] Exchange declared: documents.direct (direct)
[RabbitMQ] Exchange declared: escrow.workflow (topic)
[RabbitMQ] Exchange declared: notifications.topic (topic)
[RabbitMQ] Exchange declared: escrow.compensate (topic)
[RabbitMQ] Exchange declared: escrow.workflow (topic)
[RabbitMQ] Exchange declared: compliance.topic (topic)
[RabbitMQ] Exchange declared: escrow.compensate (topic)
[RabbitMQ] Exchange declared: investor.direct (direct)
[RabbitMQ] Exchange declared: compliance.topic (topic)
[RabbitMQ] Exchange declared: audit.topic (topic)
[RabbitMQ] Exchange declared: investor.direct (direct)
[RabbitMQ] Exchange declared: settlement.topic (topic)
[RabbitMQ] Exchange declared: audit.topic (topic)
[RabbitMQ] Exchange declared: reconciliation.topic (topic)
[RabbitMQ] Exchange declared: settlement.topic (topic)
[RabbitMQ] Exchange declared: bank.topic (topic)
[RabbitMQ] Exchange declared: reconciliation.topic (topic)
[RabbitMQ] Exchange declared: aml.topic (topic)
[RabbitMQ] Exchange declared: bank.topic (topic)
[RabbitMQ] Exchange declared: dlx.main (topic)
[RabbitMQ] Exchange declared: aml.topic (topic)
[RabbitMQ] Exchange declared: retry.5s (topic)
[RabbitMQ] Exchange declared: dlx.main (topic)
[RabbitMQ] Exchange declared: retry.30s (topic)
[RabbitMQ] Exchange declared: retry.5s (topic)
[RabbitMQ] Queue declared: servicing.daily.tasks.0
[RabbitMQ] Exchange declared: retry.30s (topic)
[RabbitMQ] Bound servicing.daily.tasks.0 to servicing.direct with key servicing.0.*
[RabbitMQ] Queue declared: servicing.daily.tasks.0
[RabbitMQ] Queue declared: servicing.daily.tasks.1
[RabbitMQ] Bound servicing.daily.tasks.0 to servicing.direct with key servicing.0.*
[RabbitMQ] Bound servicing.daily.tasks.1 to servicing.direct with key servicing.1.*
[RabbitMQ] Queue declared: servicing.daily.tasks.1
[RabbitMQ] Queue declared: servicing.daily.tasks.2
[RabbitMQ] Bound servicing.daily.tasks.1 to servicing.direct with key servicing.1.*
[RabbitMQ] Bound servicing.daily.tasks.2 to servicing.direct with key servicing.2.*
[RabbitMQ] Queue declared: servicing.daily.tasks.2
[RabbitMQ] Queue declared: servicing.daily.tasks.3
[RabbitMQ] Bound servicing.daily.tasks.2 to servicing.direct with key servicing.2.*
[RabbitMQ] Bound servicing.daily.tasks.3 to servicing.direct with key servicing.3.*
[RabbitMQ] Queue declared: servicing.daily.tasks.3
[RabbitMQ] Queue declared: servicing.daily.tasks.4
[RabbitMQ] Bound servicing.daily.tasks.3 to servicing.direct with key servicing.3.*
[RabbitMQ] Bound servicing.daily.tasks.4 to servicing.direct with key servicing.4.*
[RabbitMQ] Queue declared: servicing.daily.tasks.4
[RabbitMQ] Queue declared: servicing.daily.tasks.5
[RabbitMQ] Bound servicing.daily.tasks.4 to servicing.direct with key servicing.4.*
[RabbitMQ] Bound servicing.daily.tasks.5 to servicing.direct with key servicing.5.*
[RabbitMQ] Queue declared: servicing.daily.tasks.5
[RabbitMQ] Queue declared: servicing.daily.tasks.6
[RabbitMQ] Bound servicing.daily.tasks.5 to servicing.direct with key servicing.5.*
[RabbitMQ] Bound servicing.daily.tasks.6 to servicing.direct with key servicing.6.*
[RabbitMQ] Queue declared: servicing.daily.tasks.6
[RabbitMQ] Queue declared: servicing.daily.tasks.7
[RabbitMQ] Bound servicing.daily.tasks.6 to servicing.direct with key servicing.6.*
[RabbitMQ] Bound servicing.daily.tasks.7 to servicing.direct with key servicing.7.*
[RabbitMQ] Queue declared: servicing.daily.tasks.7
[RabbitMQ] Queue declared: payments.validation
[RabbitMQ] Bound servicing.daily.tasks.7 to servicing.direct with key servicing.7.*
[RabbitMQ] Bound payments.validation to payments.topic with key payment.*.received
[RabbitMQ] Queue declared: payments.validation
[RabbitMQ] Queue declared: payments.processing
[RabbitMQ] Bound payments.validation to payments.topic with key payment.*.received
[RabbitMQ] Bound payments.processing to payments.topic with key payment.*.validated
[RabbitMQ] Queue declared: payments.processing
[RabbitMQ] Queue declared: payments.distribution
[RabbitMQ] Bound payments.processing to payments.topic with key payment.*.validated
[RabbitMQ] Bound payments.distribution to payments.topic with key payment.*.processed
[RabbitMQ] Queue declared: payments.distribution
[RabbitMQ] Queue declared: payments.compliance
[RabbitMQ] Bound payments.distribution to payments.topic with key payment.*.processed
[RabbitMQ] Bound payments.compliance to payments.topic with key payment.*.compliance
[RabbitMQ] Queue declared: payments.compliance
[RabbitMQ] Queue declared: payments.reversal
[RabbitMQ] Bound payments.compliance to payments.topic with key payment.*.compliance
[RabbitMQ] Bound payments.reversal to payments.topic with key payment.*.reversal
[RabbitMQ] Queue declared: payments.reversal
[RabbitMQ] Queue declared: payments.returned
[RabbitMQ] Bound payments.reversal to payments.topic with key payment.*.reversal
[RabbitMQ] Bound payments.returned to payments.topic with key payment.*.returned
[RabbitMQ] Queue declared: payments.returned
[RabbitMQ] Queue declared: documents.analysis.request
[RabbitMQ] Bound payments.returned to payments.topic with key payment.*.returned
[RabbitMQ] Bound documents.analysis.request to documents.direct with key analyze
[RabbitMQ] Queue declared: documents.analysis.request
[RabbitMQ] Queue declared: notifications.email
[RabbitMQ] Bound documents.analysis.request to documents.direct with key analyze
[RabbitMQ] Bound notifications.email to notifications.topic with key notify.*.*.email
[RabbitMQ] Queue declared: notifications.email
[RabbitMQ] Queue declared: notifications.sms
[RabbitMQ] Bound notifications.email to notifications.topic with key notify.*.*.email
[RabbitMQ] Bound notifications.sms to notifications.topic with key notify.*.*.sms
[RabbitMQ] Queue declared: notifications.sms
[RabbitMQ] Queue declared: notifications.dashboard
[RabbitMQ] Bound notifications.sms to notifications.topic with key notify.*.*.sms
[RabbitMQ] Bound notifications.dashboard to notifications.topic with key notify.*.*.dashboard
[RabbitMQ] Queue declared: notifications.dashboard
[RabbitMQ] Queue declared: escrow.validate
[RabbitMQ] Bound notifications.dashboard to notifications.topic with key notify.*.*.dashboard
[RabbitMQ] Bound escrow.validate to escrow.workflow with key escrow.validate
[RabbitMQ] Queue declared: escrow.validate
[RabbitMQ] Queue declared: escrow.authorize
[RabbitMQ] Bound escrow.validate to escrow.workflow with key escrow.validate
[RabbitMQ] Bound escrow.authorize to escrow.workflow with key escrow.authorize
[RabbitMQ] Queue declared: escrow.authorize
[RabbitMQ] Queue declared: escrow.disburse
[RabbitMQ] Bound escrow.authorize to escrow.workflow with key escrow.authorize
[RabbitMQ] Bound escrow.disburse to escrow.workflow with key escrow.disburse
[RabbitMQ] Queue declared: escrow.disburse
[RabbitMQ] Queue declared: escrow.reconcile
[RabbitMQ] Bound escrow.disburse to escrow.workflow with key escrow.disburse
[RabbitMQ] Bound escrow.reconcile to escrow.workflow with key escrow.reconcile
[RabbitMQ] Queue declared: escrow.reconcile
[RabbitMQ] Queue declared: compliance.regulatory
[RabbitMQ] Bound escrow.reconcile to escrow.workflow with key escrow.reconcile
[RabbitMQ] Bound compliance.regulatory to compliance.topic with key compliance.regulatory.*
[RabbitMQ] Queue declared: compliance.regulatory
[RabbitMQ] Queue declared: compliance.investor
[RabbitMQ] Bound compliance.regulatory to compliance.topic with key compliance.regulatory.*
[RabbitMQ] Bound compliance.investor to compliance.topic with key compliance.investor.*
[RabbitMQ] Queue declared: compliance.investor
[RabbitMQ] Queue declared: compliance.internal
[RabbitMQ] Bound compliance.investor to compliance.topic with key compliance.investor.*
[RabbitMQ] Bound compliance.internal to compliance.topic with key compliance.internal.*
[RabbitMQ] Queue declared: compliance.internal
[RabbitMQ] Queue declared: investor.calc.p10
[RabbitMQ] Bound compliance.internal to compliance.topic with key compliance.internal.*
[RabbitMQ] Bound investor.calc.p10 to investor.direct with key calc.p10
[RabbitMQ] Queue declared: investor.calc.p10
[RabbitMQ] Queue declared: investor.calc.p5
[RabbitMQ] Bound investor.calc.p10 to investor.direct with key calc.p10
[RabbitMQ] Bound investor.calc.p5 to investor.direct with key calc.p5
[RabbitMQ] Queue declared: investor.calc.p5
[RabbitMQ] Queue declared: investor.calc.p1
[RabbitMQ] Bound investor.calc.p5 to investor.direct with key calc.p5
[RabbitMQ] Bound investor.calc.p1 to investor.direct with key calc.p1
[RabbitMQ] Queue declared: investor.calc.p1
[RabbitMQ] Queue declared: investor.clawback
[RabbitMQ] Bound investor.calc.p1 to investor.direct with key calc.p1
[RabbitMQ] Bound investor.clawback to investor.direct with key clawback
[RabbitMQ] Queue declared: investor.clawback
[RabbitMQ] Queue declared: audit.events
[RabbitMQ] Bound investor.clawback to investor.direct with key clawback
[RabbitMQ] Bound audit.events to audit.topic with key audit.*
[RabbitMQ] Queue declared: audit.events
[RabbitMQ] Queue declared: settlement.ach.settle
[RabbitMQ] Bound audit.events to audit.topic with key audit.*
[RabbitMQ] Bound settlement.ach.settle to settlement.topic with key ach.settlement.*
[RabbitMQ] Queue declared: settlement.ach.settle
[RabbitMQ] Queue declared: settlement.ach.return
[RabbitMQ] Bound settlement.ach.settle to settlement.topic with key ach.settlement.*
[RabbitMQ] Bound settlement.ach.return to settlement.topic with key ach.return.*
[RabbitMQ] Queue declared: settlement.ach.return
[RabbitMQ] Queue declared: settlement.wire.advice
[RabbitMQ] Bound settlement.ach.return to settlement.topic with key ach.return.*
[RabbitMQ] Bound settlement.wire.advice to settlement.topic with key wire.advice.*
[RabbitMQ] Queue declared: settlement.wire.advice
[RabbitMQ] Queue declared: settlement.check.clear
[RabbitMQ] Bound settlement.wire.advice to settlement.topic with key wire.advice.*
[RabbitMQ] Bound settlement.check.clear to settlement.topic with key check.clear.*
[RabbitMQ] Queue declared: settlement.check.clear
[RabbitMQ] Queue declared: reconciliation.bank.import
[RabbitMQ] Bound settlement.check.clear to settlement.topic with key check.clear.*
[RabbitMQ] Bound reconciliation.bank.import to bank.topic with key bank.file.*
[RabbitMQ] Queue declared: reconciliation.bank.import
[RabbitMQ] Queue declared: reconciliation.match
[RabbitMQ] Bound reconciliation.bank.import to bank.topic with key bank.file.*
[RabbitMQ] Bound reconciliation.match to reconciliation.topic with key match.*
[RabbitMQ] Queue declared: reconciliation.match
[RabbitMQ] Queue declared: reconciliation.exceptions
[RabbitMQ] Bound reconciliation.match to reconciliation.topic with key match.*
[RabbitMQ] Bound reconciliation.exceptions to reconciliation.topic with key exception.*
[RabbitMQ] Queue declared: reconciliation.exceptions
[RabbitMQ] Queue declared: compliance.hits
[RabbitMQ] Bound reconciliation.exceptions to reconciliation.topic with key exception.*
[RabbitMQ] Bound compliance.hits to compliance.topic with key compliance.hit.*
[RabbitMQ] Queue declared: compliance.hits
[RabbitMQ] Queue declared: aml.screen
[RabbitMQ] Bound compliance.hits to compliance.topic with key compliance.hit.*
[RabbitMQ] Bound aml.screen to aml.topic with key screen.*
[RabbitMQ] Queue declared: aml.screen
[RabbitMQ] Queue declared: aml.review
[RabbitMQ] Bound aml.screen to aml.topic with key screen.*
[RabbitMQ] Bound aml.review to aml.topic with key review.*
[RabbitMQ] Queue declared: aml.review
[RabbitMQ] Queue declared: dlq.payments
[RabbitMQ] Bound aml.review to aml.topic with key review.*
[RabbitMQ] Bound dlq.payments to dlx.main with key payments.dlq
[RabbitMQ] Queue declared: dlq.payments
[RabbitMQ] Queue declared: dlq.documents
[RabbitMQ] Bound dlq.payments to dlx.main with key payments.dlq
[RabbitMQ] Bound dlq.documents to dlx.main with key documents.dlq
[RabbitMQ] Queue declared: dlq.documents
[RabbitMQ] Queue declared: dlq.notifications
[RabbitMQ] Bound dlq.documents to dlx.main with key documents.dlq
[RabbitMQ] Bound dlq.notifications to dlx.main with key notifications.dlq
[RabbitMQ] Queue declared: dlq.notifications
[RabbitMQ] Queue declared: dlq.settlement
[RabbitMQ] Bound dlq.notifications to dlx.main with key notifications.dlq
[RabbitMQ] Bound dlq.settlement to dlx.main with key settlement.dlq
[RabbitMQ] Queue declared: dlq.settlement
[RabbitMQ] Queue declared: dlq.reconciliation
[RabbitMQ] Bound dlq.settlement to dlx.main with key settlement.dlq
[RabbitMQ] Bound dlq.reconciliation to dlx.main with key reconciliation.dlq
[RabbitMQ] Queue declared: dlq.reconciliation
[RabbitMQ] Queue declared: dlq.compliance
[RabbitMQ] Bound dlq.reconciliation to dlx.main with key reconciliation.dlq
[RabbitMQ] Bound dlq.compliance to dlx.main with key compliance.dlq
[RabbitMQ] Queue declared: dlq.compliance
[RabbitMQ] Queue declared: dlq.aml
[RabbitMQ] Bound dlq.compliance to dlx.main with key compliance.dlq
[RabbitMQ] Bound dlq.aml to dlx.main with key aml.dlq
[RabbitMQ] Queue declared: dlq.aml
[RabbitMQ] Queue declared: dlq.servicing.0
[RabbitMQ] Bound dlq.aml to dlx.main with key aml.dlq
[RabbitMQ] Bound dlq.servicing.0 to dlx.main with key servicing.dlq.0
[RabbitMQ] Queue declared: dlq.servicing.0
[RabbitMQ] Queue declared: dlq.servicing.1
[RabbitMQ] Bound dlq.servicing.0 to dlx.main with key servicing.dlq.0
[RabbitMQ] Bound dlq.servicing.1 to dlx.main with key servicing.dlq.1
[RabbitMQ] Queue declared: dlq.servicing.1
[RabbitMQ] Queue declared: dlq.servicing.2
[RabbitMQ] Bound dlq.servicing.1 to dlx.main with key servicing.dlq.1
[RabbitMQ] Bound dlq.servicing.2 to dlx.main with key servicing.dlq.2
[RabbitMQ] Queue declared: dlq.servicing.2
[RabbitMQ] Queue declared: dlq.servicing.3
[RabbitMQ] Bound dlq.servicing.2 to dlx.main with key servicing.dlq.2
[RabbitMQ] Bound dlq.servicing.3 to dlx.main with key servicing.dlq.3
[RabbitMQ] Queue declared: dlq.servicing.3
[RabbitMQ] Queue declared: dlq.servicing.4
[RabbitMQ] Bound dlq.servicing.3 to dlx.main with key servicing.dlq.3
[RabbitMQ] Bound dlq.servicing.4 to dlx.main with key servicing.dlq.4
[RabbitMQ] Queue declared: dlq.servicing.4
[RabbitMQ] Queue declared: dlq.servicing.5
[RabbitMQ] Bound dlq.servicing.4 to dlx.main with key servicing.dlq.4
[RabbitMQ] Bound dlq.servicing.5 to dlx.main with key servicing.dlq.5
[RabbitMQ] Queue declared: dlq.servicing.5
[RabbitMQ] Queue declared: dlq.servicing.6
[RabbitMQ] Bound dlq.servicing.5 to dlx.main with key servicing.dlq.5
[RabbitMQ] Bound dlq.servicing.6 to dlx.main with key servicing.dlq.6
[RabbitMQ] Queue declared: dlq.servicing.6
[RabbitMQ] Queue declared: dlq.servicing.7
[RabbitMQ] Bound dlq.servicing.6 to dlx.main with key servicing.dlq.6
[RabbitMQ] Bound dlq.servicing.7 to dlx.main with key servicing.dlq.7
[RabbitMQ] Topology applied successfully
[RabbitMQ] Successfully connected and topology applied
[RabbitMQ] Topology stats: {
  exchanges: 16,
  queues: 55,
  quorumQueues: 35,
  lazyQueues: 3,
  dlqs: 15
}
[RabbitMQ] Queue declared: dlq.servicing.7
[RabbitMQ] Bound dlq.servicing.7 to dlx.main with key servicing.dlq.7
[RabbitMQ] Topology applied successfully
[RabbitMQ] Successfully connected and topology applied
[RabbitMQ] Topology stats: {
  exchanges: 16,
  queues: 55,
  quorumQueues: 35,
  lazyQueues: 3,
  dlqs: 15
}
[RabbitMQ] Connection ready
[Consumers] RabbitMQ connected
[OutboxPublisher] Starting outbox publisher...
[Consumers] Outbox publisher started
[Validator] Starting payment validator consumer
[RabbitMQ] Created consumer channel for validator-consumer with prefetch 50
[RabbitMQ] Consumer started: validator-consumer on queue payments.validation
[Validator] Consumer started successfully
[Consumers] Validator consumer started
[Classifier] Starting payment classifier consumer
[RabbitMQ] Created consumer channel for classifier-consumer with prefetch 25
[RabbitMQ] Consumer started: classifier-consumer on queue q.classify
[Classifier] Consumer started successfully
[Consumers] Classifier consumer started
[RulesEngine] Starting rules engine consumer
[RabbitMQ] Created consumer channel for rules-engine-consumer with prefetch 10
[RabbitMQ] Consumer started: rules-engine-consumer on queue q.rules.post
[RulesEngine] Consumer started successfully
[Consumers] Rules engine consumer started
[RabbitMQ] Created consumer channel for payment-validation-consumer with prefetch 10
[RabbitMQ] Consumer started: payment-validation-consumer on queue payments.validation
[Validation] Payment validation consumer started
[Consumers] Validation consumer started
[RabbitMQ] Created consumer channel for payment-processing-consumer with prefetch 10
[RabbitMQ] Consumer started: payment-processing-consumer on queue payments.processing
[Processing] Payment processing consumer started
[Consumers] Processing consumer started
[RabbitMQ] Created consumer channel for payment-distribution-consumer with prefetch 10
[RabbitMQ] Consumer started: payment-distribution-consumer on queue payments.distribution
[RabbitMQ] Created consumer channel for payment-clawback-consumer with prefetch 5
[RabbitMQ] Consumer started: payment-clawback-consumer on queue investor.clawback
[Distribution] Payment distribution consumer started
[Consumers] Distribution consumer started
[RabbitMQ] Created consumer channel for payment-reversal-consumer with prefetch 5
[RabbitMQ] Consumer started: payment-reversal-consumer on queue payments.reversal
[RabbitMQ] Created consumer channel for ach-return-consumer with prefetch 5
[RabbitMQ] Consumer started: ach-return-consumer on queue payments.returned
[Reversal] Payment reversal saga started
[Consumers] Reversal saga started
[Consumers] All payment processing consumers started successfully
[Server] Payment consumers started successfully
[Metrics] Metric collectors initialized
[MetricsCollector] Started periodic metrics collection
[Server] Metrics collection started
[Column] API credentials not configured
[Routes] Registered Column banking routes
1:53:48 PM [express] serving on port 5000
1:54:05 PM [express] GET /api/user 304 in 116ms :: {"id":1,"username":"loanatik","email":"cschwartz@…
1:54:05 PM [express] GET /api/user 304 in 116ms :: {"id":1,"username":"loanatik","email":"cschwartz@…
1:54:05 PM [express] GET /api/loans/metrics 304 in 213ms :: {"totalPortfolio":"1295000.00","activeLo…
1:54:06 PM [express] GET /api/loans/metrics 304 in 211ms :: {"totalPortfolio":"1295000.00","activeLo…
[MetricsCollector] Failed to get notification stats: error: column "status" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getNotificationStats (/home/runner/workspace/server/observability/metrics-collector.ts:136:20)
    at async Timeout._onTimeout (/home/runner/workspace/server/observability/metrics-collector.ts:207:7) {
  length: 106,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '24',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
[MetricsCollector] Failed to get notification stats: error: column "status" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getNotificationStats (/home/runner/workspace/server/observability/metrics-collector.ts:136:20)
    at async Timeout._onTimeout (/home/runner/workspace/server/observability/metrics-collector.ts:207:7) {
  length: 106,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '24',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
[API] Error getting payment: TypeError: db.query is not a function
    at <anonymous> (/home/runner/workspace/server/routes/payment-routes.ts:194:29)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at requireAuth (/home/runner/workspace/server/auth/middleware.ts:102:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/runner/workspace/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:284:15
    at param (/home/runner/workspace/node_modules/express/lib/router/index.js:365:14)
    at param (/home/runner/workspace/node_modules/express/lib/router/index.js:376:14)
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:421:3)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)
    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)
    at requireAdmin (/home/runner/workspace/server/routes/rabbitmq-config.ts:31:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
1:56:06 PM [express] GET /api/payments/all 500 in 121ms :: {"error":"Internal server error"}
[API] Error getting payment: TypeError: db.query is not a function
    at <anonymous> (/home/runner/workspace/server/routes/payment-routes.ts:194:29)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at requireAuth (/home/runner/workspace/server/auth/middleware.ts:102:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/runner/workspace/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:284:15
    at param (/home/runner/workspace/node_modules/express/lib/router/index.js:365:14)
    at param (/home/runner/workspace/node_modules/express/lib/router/index.js:376:14)
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:421:3)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)
    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)
    at requireAdmin (/home/runner/workspace/server/routes/rabbitmq-config.ts:31:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
1:56:07 PM [express] GET /api/payments/metrics 500 in 185ms :: {"error":"Internal server error"}
[API] Error getting payment: TypeError: db.query is not a function
    at <anonymous> (/home/runner/workspace/server/routes/payment-routes.ts:194:29)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at requireAuth (/home/runner/workspace/server/auth/middleware.ts:102:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/runner/workspace/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:284:15
    at param (/home/runner/workspace/node_modules/express/lib/router/index.js:365:14)
    at param (/home/runner/workspace/node_modules/express/lib/router/index.js:376:14)
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:421:3)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)
    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)
    at requireAdmin (/home/runner/workspace/server/routes/rabbitmq-config.ts:31:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
1:56:07 PM [express] GET /api/payments/all 500 in 215ms :: {"error":"Internal server error"}
1:56:07 PM [express] GET /api/loans 304 in 321ms :: [{"id":35,"loanNumber":"TEST-1756093578656","loa…
[RateLimiter] IP buckets: 0, Email buckets: 0
[API] Error getting payment: TypeError: db.query is not a function
    at <anonymous> (/home/runner/workspace/server/routes/payment-routes.ts:194:29)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at requireAuth (/home/runner/workspace/server/auth/middleware.ts:102:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/runner/workspace/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:284:15
    at param (/home/runner/workspace/node_modules/express/lib/router/index.js:365:14)
    at param (/home/runner/workspace/node_modules/express/lib/router/index.js:376:14)
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:421:3)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)
    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)
    at requireAdmin (/home/runner/workspace/server/routes/rabbitmq-config.ts:31:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
1:56:37 PM [express] GET /api/payments/metrics 500 in 119ms :: {"error":"Internal server error"}
[MetricsCollector] Failed to get notification stats: error: column "status" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getNotificationStats (/home/runner/workspace/server/observability/metrics-collector.ts:136:20)
    at async Timeout._onTimeout (/home/runner/workspace/server/observability/metrics-collector.ts:207:7) {
  length: 106,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '24',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
[API] Error getting payment: TypeError: db.query is not a function
    at <anonymous> (/home/runner/workspace/server/routes/payment-routes.ts:194:29)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at requireAuth (/home/runner/workspace/server/auth/middleware.ts:102:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/runner/workspace/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:284:15
    at param (/home/runner/workspace/node_modules/express/lib/router/index.js:365:14)
    at param (/home/runner/workspace/node_modules/express/lib/router/index.js:376:14)
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:421:3)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)
    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)
    at requireAdmin (/home/runner/workspace/server/routes/rabbitmq-config.ts:31:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
1:57:08 PM [express] GET /api/payments/metrics 500 in 122ms :: {"error":"Internal server error"}
[API] Payment submission request body: {
  "loan_id": "17",
  "amount": 11701,
  "source": "check",
  "effective_date": "2025-08-25",
  "external_ref": "LN1755454646137",
  "check_number": "654",
  "payer_account": "321456",
  "payer_bank": "Wells Fargo",
  "issue_date": "2025-08-25"
}
[API] Payment 01K3GR9MT7F753KEYZZCFC5VXG submitted for processing
1:57:15 PM [express] POST /api/payments 200 in 195ms :: {"success":true,"payment_id":"01K3GR9MT7F753…
[API] Error getting payment: TypeError: db.query is not a function
    at <anonymous> (/home/runner/workspace/server/routes/payment-routes.ts:194:29)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at requireAuth (/home/runner/workspace/server/auth/middleware.ts:102:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/runner/workspace/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:284:15
    at param (/home/runner/workspace/node_modules/express/lib/router/index.js:365:14)
    at param (/home/runner/workspace/node_modules/express/lib/router/index.js:376:14)
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:421:3)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)
    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)
    at requireAdmin (/home/runner/workspace/server/routes/rabbitmq-config.ts:31:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
1:57:15 PM [express] GET /api/payments/all 500 in 120ms :: {"error":"Internal server error"}
[API] Error getting payment: TypeError: db.query is not a function
    at <anonymous> (/home/runner/workspace/server/routes/payment-routes.ts:194:29)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at requireAuth (/home/runner/workspace/server/auth/middleware.ts:102:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/runner/workspace/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:284:15
    at param (/home/runner/workspace/node_modules/express/lib/router/index.js:365:14)
    at param (/home/runner/workspace/node_modules/express/lib/router/index.js:376:14)
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:421:3)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)
    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)
    at requireAdmin (/home/runner/workspace/server/routes/rabbitmq-config.ts:31:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
1:57:15 PM [express] GET /api/payments/metrics 500 in 204ms :: {"error":"Internal server error"}
[API] Error getting payment: TypeError: db.query is not a function
    at <anonymous> (/home/runner/workspace/server/routes/payment-routes.ts:194:29)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at requireAuth (/home/runner/workspace/server/auth/middleware.ts:102:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/runner/workspace/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:284:15
    at param (/home/runner/workspace/node_modules/express/lib/router/index.js:365:14)
    at param (/home/runner/workspace/node_modules/express/lib/router/index.js:376:14)
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:421:3)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)
    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)
    at requireAdmin (/home/runner/workspace/server/routes/rabbitmq-config.ts:31:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
1:57:45 PM [express] GET /api/payments/metrics 500 in 122ms :: {"error":"Internal server error"}
[MetricsCollector] Failed to get notification stats: error: column "status" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getNotificationStats (/home/runner/workspace/server/observability/metrics-collector.ts:136:20)
    at async Timeout._onTimeout (/home/runner/workspace/server/observability/metrics-collector.ts:207:7) {
  length: 106,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '24',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
